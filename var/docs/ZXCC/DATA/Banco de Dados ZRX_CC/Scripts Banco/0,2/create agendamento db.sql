USE [ZX_CC_DEV]
GO

/****** Object:  Table [dbo].[CLIENTES]    Script Date: 05/12/2014 14:29:49 ******/
SET ANSI_NULLS ON
GO

SET QUOTED_IDENTIFIER ON
GO

SET ANSI_PADDING ON
GO

CREATE TABLE [dbo].[AGENDAMENTO](
	[COD_AGENDAMENTO] [int] IDENTITY(1,1) NOT NULL,
	[COD_PEDIDO] [int] NOT NULL,
	[COD_OBS_AGENDAMENTO] [int] NOT NULL,
	[DATA_AGENDAMENTO] [date] NOT NULL,
	[HORA_AGENDAMENTO] [time(0)] NOT NULL,
	[ESTADO] [int] NOT NULL,
	[COD_DADOS_INSTALACAO] [int] NULL,
	[DELETED] [int] NOT NULL
	
) ON [PRIMARY]

GO

CREATE TABLE [dbo].[OBS_AGENDAMENTO](
	[COD_OBS_AGENDAMENTO] [int] IDENTITY(1,1) NOT NULL,
	[INDICE] [int] NOT NULL,
	[OBSERVACAO] [char](200) NOT NULL,
	[COD_AGENDAMENTO] [int] NOT NULL,
	[CHAVE] [int] NOT NULL,
	[DELETED] [int] NOT NULL
	
) ON [PRIMARY]

GO

CREATE TABLE [dbo].[DADOS_AGENDAMENTO](
	[COD_DADOS_AGENDAMENTO] [int] IDENTITY(1,1) NOT NULL,
	[ENDERECO] [char](100) NOT NULL,
	[BAIRRO] [char](50) NOT NULL,
	[CIDADE] [char](50) NOT NULL,
	[UF] [char](2) NOT NULL,
	[COD_PAIS] [int] NOT NULL,
	[COMPLEMENTO] [char](30) NULL,
	[CEP] [char](9) NOT NULL,
	[REFERENCIA] [char](250) NULL,
	[DDD] [char](3) NOT NULL,
	[NUMERO] [char](11) NOT NULL,
	[NOME] [char] (50) NULL,
	[COD_AGENDAMENTO] [int] NOT NULL,
	[DELETED] [int] NOT NULL
	
) ON [PRIMARY]

GO

ALTER TABLE [dbo].[AGENDAMENTO]
ADD CONSTRAINT PK_COD_AGENDAMENTO PRIMARY KEY (COD_AGENDAMENTO);

ALTER TABLE [dbo].[OBS_AGENDAMENTO]
ADD CONSTRAINT PK_COD_OBS_AGENDAMENTO PRIMARY KEY (COD_OBS_AGENDAMENTO);

ALTER TABLE [dbo].[DADOS_AGENDAMENTO]
ADD CONSTRAINT PK_COD_DADOS_AGENDAMENTO PRIMARY KEY (COD_DADOS_AGENDAMENTO);

ALTER TABLE DADOS_AGENDAMENTO
ADD CONSTRAINT FK_DADOS_AGENDAMENTO_AGENDAMENTO_COD_AGENDAMENTO
FOREIGN KEY(COD_AGENDAMENTO)
REFERENCES AGENDAMENTO(COD_AGENDAMENTO);

ALTER TABLE AGENDAMENTO
ADD CONSTRAINT FK_AGENDAMENTO_PEDIDO_COD_PEDIDO
FOREIGN KEY(COD_PEDIDO)
REFERENCES PEDIDO(COD_PEDIDO);

ALTER TABLE AGENDAMENTO
ADD CONSTRAINT FK_AGENDAMENTO_OBS_AGENDAMENTO_COD_OBS_AGENDAMENTO
FOREIGN KEY(COD_OBS_AGENDAMENTO)
REFERENCES OBS_AGENDAMENTO(COD_OBS_AGENDAMENTO);

ALTER TABLE OBS_AGENDAMENTO
ADD CONSTRAINT FK_OBS_AGENDAMENTO_AGENDAMENTOCOD_AGENDAMENTO
FOREIGN KEY(COD_AGENDAMENTO)
REFERENCES AGENDAMENTO(COD_AGENDAMENTO);

GO

CREATE TABLE [dbo].[UNIDADES_AGENDADAS](
	[COD_UNIDADES_AGENDADAS] [int] IDENTITY(1,1) NOT NULL,
	[COD_AGENDAMENTO] [int] NOT NULL,
	[COD_UNIDADE] [int] NOT NULL,
	[TIPO_UNIDADE] [int] NOT NULL,
	[ESTADO] [int] NOT NULL,
	[DELETED] [int] NOT NULL,
 CONSTRAINT [PK_COD_UNIDADES_AGENDADAS] PRIMARY KEY CLUSTERED 
(
	[COD_UNIDADES_AGENDADAS] ASC
)WITH (PAD_INDEX  = OFF, STATISTICS_NORECOMPUTE  = OFF, IGNORE_DUP_KEY = OFF, ALLOW_ROW_LOCKS  = ON, ALLOW_PAGE_LOCKS  = ON) ON [PRIMARY]
) ON [PRIMARY]

GO

ALTER TABLE UNIDADES_AGENDADAS
ADD CONSTRAINT FK_UNIDADES_AGENDADAS_AGENDAMENTO_COD_AGENDAMENTO
FOREIGN KEY(COD_AGENDAMENTO)
REFERENCES AGENDAMENTO(COD_AGENDAMENTO);

ALTER TABLE UNIDADES_AGENDADAS
ADD CONSTRAINT FK_UNIDADES_AGENDADAS_TIPO_UNIDADE_COD_UNIDADE
FOREIGN KEY(TIPO_UNIDADE)
REFERENCES TIPO_UNIDADE(COD_UNIDADE);